<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>WegOne - Plataforma Completa</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body onload="initializeApp()">


    <header>
        <div><img src="/src/main/webapp/imagens/logoTransparente.png" alt="Weg Logo" class="logo" /></div>
        <nav>
            <select id="languageSelector" onchange="changeLanguage()">
                <option value="pt">Português</option>
                <option value="en">English</option>
                <option value="de">Deutsch</option>
                <option value="es">Español</option>
            </select>
            <img id="flag" class="flag" src="" alt="Bandeira" />
        </nav>
    </header>


    <main>


        <h1 id="mainTitle"></h1>
        <p id="mainParagraph"></p>


        <div id="userInfo"></div>


        <div class="menu-container" id="menuOptions">
        </div>


        <div id="form-container" class="form-container">
            <form id="login-form" style="display:none;" autocomplete="off" novalidate>
                <h2 id="loginTitle"></h2>
                <label for="loginEmail" id="label-loginEmail"></label>
                <input type="email" id="loginEmail" placeholder="" required autocomplete="username" />
                <label for="loginPassword" id="label-loginPassword"></label>
                <input type="password" id="loginPassword" placeholder="" required autocomplete="current-password" />
                <button type="submit" id="btn-login"></button>
                <button type="button" class="link-button" id="link-to-register"></button>
            </form>


            <form id="user-register-form" style="display:none;" autocomplete="off" novalidate>
                <h2 id="registerTitle"></h2>
                <label for="registerName" id="label-registerName"></label>
                <input type="text" id="registerName" placeholder="" required autocomplete="name" />
                <label for="registerEmail" id="label-registerEmail"></label>
                <input type="email" id="registerEmail" placeholder="" required autocomplete="email" />
                <label for="registerPassword" id="label-registerPassword"></label>
                <input type="password" id="registerPassword" placeholder="" required autocomplete="new-password" />
                <label for="registerPasswordConfirm" id="label-registerPasswordConfirm"></label>
                <input type="password" id="registerPasswordConfirm" placeholder="" required />
                <button type="submit" id="btn-register"></button>
                <button type="button" class="link-button" id="link-to-login"></button>
            </form>


            <form id="cadastro-form" style="display:none;" autocomplete="off" novalidate>
                <h2 id="formTitle"></h2>
                <label id="label-nome" for="Nome"></label>
                <input type="text" id="Nome" placeholder="" required />
                <label id="label-tipo" for="tipo"></label>
                <select id="tipo"></select>
                <label id="label-conteudo" for="conteudo-pt"></label>
                <textarea id="conteudo-pt" rows="6" placeholder="" required></textarea>
                <button type="submit" id="btn-cadastrar">Cadastrar</button>
            </form>


            <form id="pesquisa-form" style="display:none;" autocomplete="off" novalidate>
                <label id="label-pesquisaNome" for="pesquisaNome"></label>
                <input type="text" id="pesquisaNome" placeholder="" />
                <button type="submit" id="btn-pesquisar"></button>
            </form>


            <form id="editar-form" style="display:none;" autocomplete="off" novalidate>
                <label id="label-editarNome" for="editarNome"></label>
                <input type="text" id="editarNome" placeholder="" required />
                <button type="submit" id="btn-editar"></button>
            </form>


            <form id="excluir-form" style="display:none;" autocomplete="off" novalidate>
                <label id="label-excluirNome" for="excluirNome"></label>
                <input type="text" id="excluirNome" placeholder="" />
                <button type="submit" id="btn-excluir"></button>
            </form>
        </div>
    </main>


    <footer>
        &copy; 2025 WegOne. Todos os direitos reservados.
    </footer>


    <script>

        let currentLanguage = 'pt';
        let currentUser = null;
        let users = [];
        let orientacoes = [];


        const translations = {
            pt: {
                title: "Bem-vindo ao WegOne",
                paragraph: "Escolha uma opção abaixo para começar.",
                flag: "https://flagpedia.net/data/flags/h80/br.png",
                menu: {
                    login: "Login",
                    registrar: "Registrar Usuário",
                    cadastrar: "Cadastrar Orientação",
                    pesquisar: "Pesquisar Orientação",
                    editar: "Editar Orientação",
                    excluir: "Excluir Orientação",
                    logout: "Sair"
                },
                formTitles: {
                    login: "Login do Usuário",
                    register: "Cadastro de Usuário",
                    cadastro: "Cadastro de Orientação",
                    pesquisa: "Pesquisar Orientação",
                    editar: "Editar Orientação",
                    excluir: "Excluir Orientação"
                },
                labels: {
                    loginEmail: "Email:",
                    loginPassword: "Senha:",
                    registerName: "Nome Completo:",
                    registerEmail: "Email:",
                    registerPassword: "Senha:",
                    registerPasswordConfirm: "Confirme a Senha:",
                    nome: "Nome da Orientação:",
                    tipo: "Tipo da Orientação:",
                    conteudo: "Conteúdo:",
                    pesquisaNome: "Pesquisar por Nome:",
                    editarNome: "Nome da Orientação:",
                    excluirNome: "Excluir Orientação (por Nome):"
                },
                placeholders: {
                    loginEmail: "Digite seu email",
                    loginPassword: "Digite sua senha",
                    registerName: "Digite seu nome completo",
                    registerEmail: "Digite seu email",
                    registerPassword: "Digite sua senha",
                    registerPasswordConfirm: "Confirme sua senha",
                    nome: "Digite o nome",
                    conteudo: "Digite o conteúdo em português",
                    pesquisaNome: "Digite o nome da orientação",
                    editarNome: "Digite o nome",
                    excluirNome: "Digite o nome da orientação"
                },
                buttons: {
                    login: "Entrar",
                    register: "Registrar",
                    cadastrar: "Cadastrar",
                    pesquisar: "Pesquisar",
                    editar: "Editar",
                    excluir: "Excluir",
                    logout: "Sair",
                    switchToRegister: "Não tem conta? Registre-se aqui",
                    switchToLogin: "Já tem conta? Faça login aqui"
                },
                tipoOptions: [
                    { value: "Manual de Operação", text: "Manual de Operação" },
                    { value: "Procedimento de Segurança", text: "Procedimento de Segurança" },
                    { value: "Manutenção e Reparos", text: "Manutenção e Reparos" },
                    { value: "Testes e Diagnóstico", text: "Testes e Diagnóstico" },
                    { value: "Manual de Conduta e Operações Setoriais", text: "Manual de Conduta e Operações Setoriais" }
                ],
                alerts: {
                    loginSuccess: "Login realizado com sucesso!",
                    loginFail: "Email ou senha incorretos.",
                    registerSuccess: "Usuário registrado com sucesso!",
                    registerFailEmailExists: "Email já cadastrado.",
                    registerFailPasswordMismatch: "As senhas não coincidem.",
                    loginRequired: "Por favor, faça login para acessar essa funcionalidade.",
                    cadastroSuccess: "Orientação cadastrada com sucesso!",
                    pesquisaNoResults: "Nenhuma orientação encontrada.",
                    editarSuccess: "Orientação editada com sucesso!",
                    editarFailNotFound: "Orientação não encontrada.",
                    excluirSuccess: "Orientação excluída com sucesso!",
                    excluirFailNotFound: "Orientação não encontrada.",
                    logoutSuccess: "Logout realizado com sucesso!"
                }
            },
            en: {
                title: "Welcome to WegOne",
                paragraph: "Choose an option below to get started.",
                flag: "https://flagpedia.net/data/flags/h80/us.png",
                menu: {
                    login: "Login",
                    registrar: "Register User",
                    cadastrar: "Register Orientation",
                    pesquisar: "Search Orientation",
                    editar: "Edit Orientation",
                    excluir: "Delete Orientation",
                    logout: "Logout"
                },
                formTitles: {
                    login: "User Login",
                    register: "User Registration",
                    cadastro: "Orientation Registration",
                    pesquisa: "Search Orientation",
                    editar: "Edit Orientation",
                    excluir: "Delete Orientation"
                },
                labels: {
                    loginEmail: "Email:",
                    loginPassword: "Password:",
                    registerName: "Full Name:",
                    registerEmail: "Email:",
                    registerPassword: "Password:",
                    registerPasswordConfirm: "Confirm Password:",
                    nome: "Orientation Name:",
                    tipo: "Orientation Type:",
                    conteudo: "Content:",
                    pesquisaNome: "Search by Name:",
                    editarNome: "Orientation Name:",
                    excluirNome: "Delete Orientation (by Name):"
                },
                placeholders: {
                    loginEmail: "Enter your email",
                    loginPassword: "Enter your password",
                    registerName: "Enter your full name",
                    registerEmail: "Enter your email",
                    registerPassword: "Enter your password",
                    registerPasswordConfirm: "Confirm your password",
                    nome: "Type the name",
                    conteudo: "Type the content in English",
                    pesquisaNome: "Type the orientation name",
                    editarNome: "Type the name",
                    excluirNome: "Type the orientation name"
                },
                buttons: {
                    login: "Login",
                    register: "Register",
                    cadastrar: "Register",
                    pesquisar: "Search",
                    editar: "Edit",
                    excluir: "Delete",
                    logout: "Logout",
                    switchToRegister: "No account? Register here",
                    switchToLogin: "Already have an account? Login here"
                },
                tipoOptions: [
                    { value: "Operation Manual", text: "Operation Manual" },
                    { value: "Safety Procedure", text: "Safety Procedure" },
                    { value: "Maintenance and Repairs", text: "Maintenance and Repairs" },
                    { value: "Testing and Diagnostics", text: "Testing and Diagnostics" },
                    { value: "Conduct and Operations Manual", text: "Conduct and Operations Manual" }
                ],
                alerts: {
                    loginSuccess: "Login successful!",
                    loginFail: "Incorrect email or password.",
                    registerSuccess: "User registered successfully!",
                    registerFailEmailExists: "Email already registered.",
                    registerFailPasswordMismatch: "Passwords do not match.",
                    loginRequired: "Please login to access this feature.",
                    cadastroSuccess: "Orientation registered successfully!",
                    pesquisaNoResults: "No orientations found.",
                    editarSuccess: "Orientation edited successfully!",
                    editarFailNotFound: "Orientation not found.",
                    excluirSuccess: "Orientation deleted successfully!",
                    excluirFailNotFound: "Orientation not found.",
                    logoutSuccess: "Logout successful!"
                }
            },
            de: {
                title: "Willkommen bei WegOne",
                paragraph: "Wählen Sie eine Option unten, um zu beginnen.",
                flag: "https://flagpedia.net/data/flags/h80/de.png",
                menu: {
                    login: "Anmelden",
                    registrar: "Benutzer registrieren",
                    cadastrar: "Orientierung erfassen",
                    pesquisar: "Orientierung suchen",
                    editar: "Orientierung bearbeiten",
                    excluir: "Orientierung löschen",
                    logout: "Abmelden"
                },
                formTitles: {
                    login: "Benutzeranmeldung",
                    register: "Benutzerregistrierung",
                    cadastro: "Orientierungserfassung",
                    pesquisa: "Orientierung suchen",
                    editar: "Orientierung bearbeiten",
                    excluir: "Orientierung löschen"
                },
                labels: {
                    loginEmail: "E-Mail:",
                    loginPassword: "Passwort:",
                    registerName: "Vollständiger Name:",
                    registerEmail: "E-Mail:",
                    registerPassword: "Passwort:",
                    registerPasswordConfirm: "Passwort bestätigen:",
                    nome: "Name der Orientierung:",
                    tipo: "Art der Orientierung:",
                    conteudo: "Inhalt:",
                    pesquisaNome: "Suche nach Namen:",
                    editarNome: "Name der Orientierung:",
                    excluirNome: "Orientierung löschen (nach Name):"
                },
                placeholders: {
                    loginEmail: "Geben Sie Ihre E-Mail ein",
                    loginPassword: "Geben Sie Ihr Passwort ein",
                    registerName: "Geben Sie Ihren vollständigen Namen ein",
                    registerEmail: "Geben Sie Ihre E-Mail ein",
                    registerPassword: "Geben Sie Ihr Passwort ein",
                    registerPasswordConfirm: "Bestätigen Sie Ihr Passwort",
                    nome: "Geben Sie den Namen ein",
                    conteudo: "Geben Sie den Inhalt auf Deutsch ein",
                    pesquisaNome: "Geben Sie den Namen ein",
                    editarNome: "Geben Sie den Namen ein",
                    excluirNome: "Geben Sie den Namen ein"
                },
                buttons: {
                    login: "Anmelden",
                    register: "Registrieren",
                    cadastrar: "Erfassen",
                    pesquisar: "Suchen",
                    editar: "Bearbeiten",
                    excluir: "Löschen",
                    logout: "Abmelden",
                    switchToRegister: "Kein Konto? Hier registrieren",
                    switchToLogin: "Bereits ein Konto? Hier anmelden"
                },
                tipoOptions: [
                    { value: "Betriebsanleitung", text: "Betriebsanleitung" },
                    { value: "Sicherheitsverfahren", text: "Sicherheitsverfahren" },
                    { value: "Wartung und Reparaturen", text: "Wartung und Reparaturen" },
                    { value: "Tests und Diagnostik", text: "Tests und Diagnostik" },
                    { value: "Verhaltens- und Betriebsanleitung", text: "Verhaltens- und Betriebsanleitung" }
                ],
                alerts: {
                    loginSuccess: "Anmeldung erfolgreich!",
                    loginFail: "Falsche E-Mail oder Passwort.",
                    registerSuccess: "Benutzer erfolgreich registriert!",
                    registerFailEmailExists: "E-Mail bereits registriert.",
                    registerFailPasswordMismatch: "Passwörter stimmen nicht überein.",
                    loginRequired: "Bitte melden Sie sich an, um auf diese Funktion zuzugreifen.",
                    cadastroSuccess: "Orientierung erfolgreich erfasst!",
                    pesquisaNoResults: "Keine Orientierung gefunden.",
                    editarSuccess: "Orientierung erfolgreich bearbeitet!",
                    editarFailNotFound: "Orientierung nicht gefunden.",
                    excluirSuccess: "Orientierung erfolgreich gelöscht!",
                    excluirFailNotFound: "Orientierung nicht gefunden.",
                    logoutSuccess: "Abmeldung erfolgreich!"
                }
            },
            es: {
                title: "Bienvenido a WegOne",
                paragraph: "Elige una opción abajo para comenzar.",
                flag: "https://flagpedia.net/data/flags/h80/es.png",
                menu: {
                    login: "Iniciar Sesión",
                    registrar: "Registrar Usuario",
                    cadastrar: "Registrar Orientación",
                    pesquisar: "Buscar Orientación",
                    editar: "Editar Orientación",
                    excluir: "Eliminar Orientación",
                    logout: "Cerrar Sesión"
                },
                formTitles: {
                    login: "Inicio de Sesión",
                    register: "Registro de Usuario",
                    cadastro: "Registro de Orientación",
                    pesquisa: "Buscar Orientación",
                    editar: "Editar Orientación",
                    excluir: "Eliminar Orientación"
                },
                labels: {
                    loginEmail: "Correo Electrónico:",
                    loginPassword: "Contraseña:",
                    registerName: "Nombre Completo:",
                    registerEmail: "Correo Electrónico:",
                    registerPassword: "Contraseña:",
                    registerPasswordConfirm: "Confirme la Contraseña:",
                    nome: "Nombre de la Orientación:",
                    tipo: "Tipo de Orientación:",
                    conteudo: "Contenido:",
                    pesquisaNome: "Buscar por Nombre:",
                    editarNome: "Nombre de la Orientación:",
                    excluirNome: "Eliminar Orientación (por Nombre):"
                },
                placeholders: {
                    loginEmail: "Ingrese su correo electrónico",
                    loginPassword: "Ingrese su contraseña",
                    registerName: "Ingrese su nombre completo",
                    registerEmail: "Ingrese su correo electrónico",
                    registerPassword: "Ingrese su contraseña",
                    registerPasswordConfirm: "Confirme su contraseña",
                    nome: "Escriba el nombre",
                    conteudo: "Escriba el contenido en español",
                    pesquisaNome: "Escriba el nombre de la orientación",
                    editarNome: "Escriba el nombre",
                    excluirNome: "Escriba el nombre de la orientación"
                },
                buttons: {
                    login: "Entrar",
                    register: "Registrar",
                    cadastrar: "Registrar",
                    pesquisar: "Buscar",
                    editar: "Editar",
                    excluir: "Eliminar",
                    logout: "Cerrar Sesión",
                    switchToRegister: "¿No tienes cuenta? Regístrate aquí",
                    switchToLogin: "¿Ya tienes cuenta? Inicia sesión aquí"
                },
                tipoOptions: [
                    { value: "Manual de Operación", text: "Manual de Operación" },
                    { value: "Procedimiento de Seguridad", text: "Procedimiento de Seguridad" },
                    { value: "Mantenimiento y Reparaciones", text: "Mantenimiento y Reparaciones" },
                    { value: "Pruebas y Diagnóstico", text: "Pruebas y Diagnóstico" },
                    { value: "Manual de Conducta y Operaciones", text: "Manual de Conducta y Operaciones" }
                ],
                alerts: {
                    loginSuccess: "¡Inicio de sesión exitoso!",
                    loginFail: "Correo o contraseña incorrectos.",
                    registerSuccess: "Usuario registrado exitosamente!",
                    registerFailEmailExists: "Correo ya registrado.",
                    registerFailPasswordMismatch: "Las contraseñas no coinciden.",
                    loginRequired: "Por favor inicie sesión para acceder a esta función.",
                    cadastroSuccess: "Orientación registrada exitosamente!",
                    pesquisaNoResults: "No se encontraron orientaciones.",
                    editarSuccess: "Orientación editada exitosamente!",
                    editarFailNotFound: "Orientación no encontrada.",
                    excluirSuccess: "Orientación eliminada exitosamente!",
                    excluirFailNotFound: "Orientación no encontrada.",
                    logoutSuccess: "Cierre de sesión exitoso!"
                }
            }
        };


        function generateUUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                let r = Math.random() * 16 | 0,
                    v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }


        function simpleHash(str) {
            let hash = 0, i, chr;
            if (str.length === 0) return hash.toString();
            for (i = 0; i < str.length; i++) {
                chr = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + chr;
                hash |= 0;
            }
            return hash.toString();
        }


        function saveToStorage() {
            localStorage.setItem('wegone_users', JSON.stringify(users));
            localStorage.setItem('wegone_orientacoes', JSON.stringify(orientacoes));
            localStorage.setItem('wegone_currentUser', currentUser ? currentUser.id : '');
        }


        function loadFromStorage() {
            const usersData = localStorage.getItem('wegone_users');
            if (usersData) {
                users = JSON.parse(usersData);
            } else {
                users = [];
            }


            const orientacoesData = localStorage.getItem('wegone_orientacoes');
            if (orientacoesData) {
                orientacoes = JSON.parse(orientacoesData);
            } else {
                orientacoes = [];
            }


            const currentUserId = localStorage.getItem('wegone_currentUser');
            if (currentUserId) {
                currentUser = users.find(u => u.id === currentUserId) || null;
            } else {
                currentUser = null;
            }
        }


        function initializeApp() {
            loadFromStorage();
            setLanguageInSelector();
            changeLanguage();
            updateUIAfterLogin();
            setupEventListeners();
        }


        function setLanguageInSelector() {
            const langSelect = document.getElementById('languageSelector');
            const lang = localStorage.getItem('wegone_language');
            if (lang && Object.keys(translations).includes(lang)) {
                langSelect.value = lang;
                currentLanguage = lang;
            } else {
                currentLanguage = langSelect.value;
            }
        }


        function changeLanguage() {
            const langSelect = document.getElementById('languageSelector');
            currentLanguage = langSelect.value;
            localStorage.setItem('wegone_language', currentLanguage);


            const t = translations[currentLanguage];


            document.getElementById('flag').src = t.flag;


            document.getElementById('mainTitle').textContent = t.title;
            document.getElementById('mainParagraph').textContent = t.paragraph;


            buildMenuOptions();


            document.getElementById('loginTitle').textContent = t.formTitles.login;
            document.getElementById('label-loginEmail').textContent = t.labels.loginEmail;
            document.getElementById('loginEmail').placeholder = t.placeholders.loginEmail;
            document.getElementById('label-loginPassword').textContent = t.labels.loginPassword;
            document.getElementById('loginPassword').placeholder = t.placeholders.loginPassword;
            document.getElementById('btn-login').textContent = t.buttons.login;
            document.getElementById('link-to-register').textContent = t.buttons.switchToRegister;


            document.getElementById('registerTitle').textContent = t.formTitles.register;
            document.getElementById('label-registerName').textContent = t.labels.registerName;
            document.getElementById('registerName').placeholder = t.placeholders.registerName;
            document.getElementById('label-registerEmail').textContent = t.labels.registerEmail;
            document.getElementById('registerEmail').placeholder = t.placeholders.registerEmail;
            document.getElementById('label-registerPassword').textContent = t.labels.registerPassword;
            document.getElementById('registerPassword').placeholder = t.placeholders.registerPassword;
            document.getElementById('label-registerPasswordConfirm').textContent = t.labels.registerPasswordConfirm;
            document.getElementById('registerPasswordConfirm').placeholder = t.placeholders.registerPasswordConfirm;
            document.getElementById('btn-register').textContent = t.buttons.register;
            document.getElementById('link-to-login').textContent = t.buttons.switchToLogin;


            document.getElementById('formTitle').textContent = t.formTitles.cadastro;
            document.getElementById('label-nome').textContent = t.labels.nome;
            document.getElementById('Nome').placeholder = t.placeholders.nome;
            document.getElementById('label-tipo').textContent = t.labels.tipo;


            const tipoSelect = document.getElementById('tipo');
            tipoSelect.innerHTML = '';
            t.tipoOptions.forEach(opt => {
                const optionEl = document.createElement('option');
                optionEl.value = opt.value;
                optionEl.textContent = opt.text;
                tipoSelect.appendChild(optionEl);
            });


            document.getElementById('label-conteudo').textContent = t.labels.conteudo;
            document.getElementById('conteudo-pt').placeholder = t.placeholders.conteudo;
            document.getElementById('btn-cadastrar').textContent = t.buttons.cadastrar;


            document.getElementById('label-pesquisaNome').textContent = t.labels.pesquisaNome;
            document.getElementById('pesquisaNome').placeholder = t.placeholders.pesquisaNome;
            document.getElementById('btn-pesquisar').textContent = t.buttons.pesquisar;


            document.getElementById('label-editarNome').textContent = t.labels.editarNome;
            document.getElementById('editarNome').placeholder = t.placeholders.editarNome;
            document.getElementById('btn-editar').textContent = t.buttons.editar;


            document.getElementById('label-excluirNome').textContent = t.labels.excluirNome;
            document.getElementById('excluirNome').placeholder = t.placeholders.excluirNome;
            document.getElementById('btn-excluir').textContent = t.buttons.excluir;
        }


        function buildMenuOptions() {
            const menuOptionsContainer = document.getElementById('menuOptions');
            menuOptionsContainer.innerHTML = '';


            const t = translations[currentLanguage];


            if (currentUser) {

                const btnCadastrar = createMenuButton(t.menu.cadastrar, () => showForm('cadastro'));
                const btnPesquisar = createMenuButton(t.menu.pesquisar, () => showForm('pesquisa'));
                const btnEditar = createMenuButton(t.menu.editar, () => showForm('editar'));
                const btnExcluir = createMenuButton(t.menu.excluir, () => showForm('excluir'));
                const btnLogout = createMenuButton(t.menu.logout, logout);


                menuOptionsContainer.appendChild(btnCadastrar);
                menuOptionsContainer.appendChild(btnPesquisar);
                menuOptionsContainer.appendChild(btnEditar);
                menuOptionsContainer.appendChild(btnExcluir);
                menuOptionsContainer.appendChild(btnLogout);


            } else {
                document.getElementById('userInfo').textContent = '';
                const btnLogin = createMenuButton(t.menu.login, () => showForm('login'));
                const btnRegistrar = createMenuButton(t.menu.registrar, () => showForm('user-register'));


                menuOptionsContainer.appendChild(btnLogin);
                menuOptionsContainer.appendChild(btnRegistrar);
            }


            document.getElementById('form-container').style.display = 'none';
        }


        function createMenuButton(text, onClickFunc) {
            const btn = document.createElement('button');
            btn.textContent = text;
            btn.className = 'menu-option';
            btn.type = 'button';
            btn.addEventListener('click', onClickFunc);
            return btn;
        }


        function showForm(formType) {
            const container = document.getElementById('form-container');
            container.style.display = 'block';


            const forms = [
                'login-form',
                'user-register-form',
                'cadastro-form',
                'pesquisa-form',
                'editar-form',
                'excluir-form'
            ];


            forms.forEach(formID => {
                document.getElementById(formID).style.display = (formID === formType + '-form' || (formType === 'user-register' && formID === 'user-register-form')) ? 'flex' : 'none';
            });


            clearFormInputs(formType);


            if (formType === 'login') {
                document.getElementById('loginEmail').focus();
            } else if (formType === 'user-register') {
                document.getElementById('registerName').focus();
            } else if (formType === 'cadastro') {
                document.getElementById('Nome').focus();
            }
        }


        function clearFormInputs(formType) {
            if (formType === 'login') {
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
            } else if (formType === 'user-register') {
                document.getElementById('registerName').value = '';
                document.getElementById('registerEmail').value = '';
                document.getElementById('registerPassword').value = '';
                document.getElementById('registerPasswordConfirm').value = '';
            } else if (formType === 'cadastro') {
                document.getElementById('Nome').value = '';
                document.getElementById('tipo').selectedIndex = 0;
                document.getElementById('conteudo-pt').value = '';
            } else if (formType === 'pesquisa') {
                document.getElementById('pesquisaNome').value = '';
            } else if (formType === 'editar') {
                document.getElementById('editarNome').value = '';
            } else if (formType === 'excluir') {
                document.getElementById('excluirNome').value = '';
            }
        }


        function updateUIAfterLogin() {
            buildMenuOptions();
            clearFormInputs('cadastro');
            clearFormInputs('pesquisa');
            clearFormInputs('editar');
            clearFormInputs('excluir');
            document.getElementById('form-container').style.display = 'none';
        }


        function validateLogin(email, password) {
            const hashedPass = simpleHash(password);
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase() && u.password === hashedPass);
            if (user) {
                currentUser = user;
                saveToStorage();
                return true;
            }
            return false;
        }


        function login() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const t = translations[currentLanguage];


            if (!email || !password) {
                Swal.fire('Erro', t.alerts.loginFail, 'error');
                return;
            }


            if (validateLogin(email, password)) {
                Swal.fire('Sucesso', t.alerts.loginSuccess, 'success').then(() => {
                    updateUIAfterLogin();
                });
            } else {
                Swal.fire('Erro', t.alerts.loginFail, 'error');
            }
        }

        function validateUserRegistration(name, email, password, passwordConfirm) {
            const t = translations[currentLanguage];
            if (!name) return 'Informe o nome completo.';
            if (!email) return 'Informe o email.';
            if (users.some(u => u.email.toLowerCase() === email.toLowerCase())) {
                return t.alerts.registerFailEmailExists;
            }
            if (password !== passwordConfirm) return t.alerts.registerFailPasswordMismatch;
            if (password.length < 6) return 'A senha deve ter ao menos 6 caracteres.';
            return null;
        }

        function registerUser() {
            const t = translations[currentLanguage];
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;


            const validationError = validateUserRegistration(name, email, password, passwordConfirm);
            if (validationError) {
                Swal.fire('Erro', validationError, 'error');
                return false;
            }


            const newUser = {
                id: generateUUID(),
                name,
                email,
                password: simpleHash(password)
            };
            users.push(newUser);
            currentUser = newUser;
            saveToStorage();


            Swal.fire('Sucesso', t.alerts.registerSuccess, 'success').then(() => {
                updateUIAfterLogin();
            });


            return true;
        }


        function logout() {
            const t = translations[currentLanguage];
            currentUser = null;
            saveToStorage();
            Swal.fire('Sucesso', t.alerts.logoutSuccess, 'success').then(() => {
                updateUIAfterLogin();
            });
        }


        const Orientacoes = [];

        function cadastrarOrientacao() {
            const nome = document.getElementById('Nome').value;
            const tipo = document.getElementById('tipo').value;
            const conteudo = document.getElementById('conteudo-pt').value;
            const id = Date.now();
            const horarioCadastro = new Date().toLocaleString();

            const novaOrientacao = {
                id,
                nome,
                tipo,
                conteudo,
                horarioCadastro
            };

            orientacoes.push(novaOrientacao);

            localStorage.setItem('wegone_orientacoes', JSON.stringify(orientacoes));

            Swal.fire({
                title: 'Sucesso!',
                text: 'Orientação cadastrada com sucesso!',
                icon: 'success',
                confirmButtonText: 'OK'
            }).then(() => {
                let mensagemDetalhada = `
            <strong>Nome:</strong> ${novaOrientacao.nome} <br>
            <strong>ID do Produto:</strong> ${novaOrientacao.id} <br>
            <strong>Horário do Cadastro:</strong> ${novaOrientacao.horarioCadastro} <br>
            <strong>Tipo:</strong> ${novaOrientacao.tipo} <br>
            <strong>Conteúdo:</strong> ${novaOrientacao.conteudo} <br>
        `;

                Swal.fire({
                    title: 'Informações do Produto Cadastrado',
                    html: mensagemDetalhada,
                    icon: 'info',
                    confirmButtonText: 'OK'
                }).then(() => {
                    document.getElementById('Nome').value = '';
                    document.getElementById('tipo').value = 'Manual de Operação';
                    document.getElementById('conteudo-pt').value = '';
                });
            });
        }

        document.getElementById('cadastro-form').addEventListener('submit', function (event) {
            event.preventDefault();
            cadastrarOrientacao();
        });



        function pesquisarOrientacao() {
            const pesquisaNome = document.getElementById('pesquisaNome').value.toLowerCase();
            const resultados = orientacoes.filter(orientacao => orientacao.nome.toLowerCase().includes(pesquisaNome));


            if (resultados.length > 0) {
                let mensagem = '<ul>';
                resultados.forEach(orientacao => {
                    mensagem += `
                    <li>
                        <strong>Nome:</strong> ${orientacao.nome} <br>
                        <strong>Tipo:</strong> ${orientacao.tipo} <br>
                        <strong>Conteúdo:</strong> ${orientacao.conteudo} <br>
                    </li><br>`;
                });
                mensagem += '</ul>';


                Swal.fire({
                    title: 'Resultados da Pesquisa',
                    html: mensagem,
                    icon: 'info'
                });
            } else {
                Swal.fire('Nenhum resultado', 'Nenhuma orientação encontrada com esse nome.', 'warning');
            }
        }


        async function editarOrientacao() {
            const nomeAntigo = document.getElementById('editarNome').value;
            if (!nomeAntigo) {
                Swal.fire('Erro', 'Por favor, digite o nome da orientação a ser editada.', 'error');
                return;
            }


            const index = orientacoes.findIndex(orientacao => orientacao.nome.toLowerCase() === nomeAntigo.toLowerCase());
            if (index === -1) {
                Swal.fire('Erro', `A orientação "${nomeAntigo}" não foi encontrada.`, 'error');
                return;
            }


            const { value: confirmText } = await Swal.fire({
                title: 'Confirmação',
                text: 'Digite "confirmar" para editar a orientação',
                input: 'text',
                inputPlaceholder: 'Digite confirmar aqui',
                showCancelButton: true
            });


            if (confirmText && confirmText.toLowerCase() === 'confirmar') {
                const novoNome = await Swal.fire({
                    title: 'Novo Nome',
                    input: 'text',
                    inputLabel: 'Digite o novo nome da orientação',
                    inputPlaceholder: 'Novo nome',
                    showCancelButton: true
                });


                const novoTipo = await Swal.fire({
                    title: 'Novo Tipo',
                    input: 'select',
                    inputOptions: {
                        'Manual de Operação': 'Manual de Operação',
                        'Procedimento de Segurança': 'Procedimento de Segurança',
                        'Manutenção e Reparos': 'Manutenção e Reparos',
                        'Testes e Diagnóstico': 'Testes e Diagnóstico',
                        'Manual de Conduta e Operações Setoriais': 'Manual de Conduta e Operações Setoriais'
                    },
                    inputPlaceholder: 'Selecione o novo tipo',
                    showCancelButton: true
                });


                const novoConteudo = await Swal.fire({
                    title: 'Novo Conteúdo',
                    input: 'textarea',
                    inputPlaceholder: 'Digite o novo conteúdo',
                    showCancelButton: true
                });


                if (novoNome.value && novoTipo.value && novoConteudo.value) {
                    orientacoes[index].nome = novoNome.value;
                    orientacoes[index].tipo = novoTipo.value;
                    orientacoes[index].conteudo = novoConteudo.value;
                    Swal.fire('Editado!', 'A orientação foi atualizada com sucesso.', 'success');
                } else {
                    Swal.fire('Erro', 'Todos os campos são obrigatórios.', 'error');
                }
            } else {
                Swal.fire('Cancelado', 'Edição cancelada ou confirmação incorreta.', 'error');
            }
        }


        async function excluirOrientacao() {
            const nome = document.getElementById('excluirNome').value;
            if (!nome) {
                Swal.fire('Erro', 'Por favor, digite o nome da orientação a ser excluída.', 'error');
                return;
            }


            const { value: confirmText } = await Swal.fire({
                title: 'Confirmação',
                text: `Tem certeza que deseja excluir "${nome}"? Digite "confirmar" para continuar.`,
                input: 'text',
                inputPlaceholder: 'Digite confirmar aqui',
                showCancelButton: true
            });


            if (confirmText && confirmText.toLowerCase() === 'confirmar') {
                const index = orientacoes.findIndex(orientacao => orientacao.nome.toLowerCase() === nome.toLowerCase());
                if (index !== -1) {
                    orientacoes.splice(index, 1);
                    Swal.fire('Excluído!', `A orientação "${nome}" foi excluída com sucesso!`, 'success');
                } else {
                    Swal.fire('Erro', `A orientação "${nome}" não foi encontrada.`, 'error');
                }
            } else {
                Swal.fire('Cancelado', 'Exclusão cancelada ou confirmação incorreta.', 'error');
            }
        }


        function setupEventListeners() {
            const loginForm = document.getElementById('login-form');
            loginForm.addEventListener('submit', event => {
                event.preventDefault();
                login();
            });


            const registerForm = document.getElementById('user-register-form');
            registerForm.addEventListener('submit', event => {
                event.preventDefault();
                registerUser();
            });


            const cadastroForm = document.getElementById('cadastro-form');
            cadastroForm.addEventListener('submit', event => {
                event.preventDefault();
                cadastrarOrientacao();
            });


            const pesquisaForm = document.getElementById('pesquisa-form');
            pesquisaForm.addEventListener('submit', event => {
                event.preventDefault();
                pesquisarOrientacao();
            });


            const editarForm = document.getElementById('editar-form');
            editarForm.addEventListener('submit', event => {
                event.preventDefault();
                editarOrientacao();
            });


            const excluirForm = document.getElementById('excluir-form');
            excluirForm.addEventListener('submit', event => {
                event.preventDefault();
                excluirOrientacao();
            });


            document.getElementById('link-to-register').addEventListener('click', () => showForm('user-register'));
            document.getElementById('link-to-login').addEventListener('click', () => showForm('login'));
        }
    </script>
</body>

</html>
